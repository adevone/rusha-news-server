plugins {
    id("application")
    id("org.jetbrains.kotlin.jvm") version "1.4.32"
    id("org.jetbrains.kotlin.plugin.serialization") version "1.4.32"
    id("com.github.johnrengelman.shadow") version "6.1.0"
}

mainClassName = "io.rusha.news.AppKt"

shadowJar {
    manifest {
        attributes "Main-Class": mainClassName
    }
    archiveFileName = "app.jar"
}

group 'io.adev'
version '0.1'

repositories {
    mavenCentral()
}

task stage() {
    dependsOn shadowJar
}

dependencies {
    def ktorVersion = "1.5.3"

    implementation("org.jetbrains.kotlin:kotlin-stdlib")
    implementation("io.ktor:ktor-server-netty:$ktorVersion")
    implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:1.1.0")
    implementation("io.ktor:ktor-serialization:$ktorVersion")
}
